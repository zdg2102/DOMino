{"version":3,"sources":["webpack/bootstrap 970ad20c7fbce4754407","./js/main.js","./js/snake.js","./js/board.js","./js/snake-view.js"],"names":[],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,uBAAe;AACf;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;;;;;;ACtCA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA,EAAC;;;;;;;ACTD;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,iBAAgB,gBAAgB;AAChC;AACA;AACA;;AAEA;AACA;AACA,iBAAgB,0BAA0B;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,sDAAqD;AACrD;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;AClDA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,iBAAgB,4BAA4B;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,iBAAgB,+BAA+B;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAE;AACF;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;AC5FA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,iBAAgB,gBAAgB;AAChC;AACA;AACA;;AAEA;AACA;AACA,iBAAgB,yCAAyC;AACzD;AACA;AACA;AACA;;AAEA,aAAY,yCAAyC;AACrD;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/js/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 970ad20c7fbce4754407\n **/","var Board = require(\"./board\");\nvar SnakeView = require(\"./snake-view\");\n\n$l(function () {\n\n  var $gameFigure = $l(\"figure\");\n\tvar board = new Board();\n\tvar view = new SnakeView(board, $gameFigure);\n\n});\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./js/main.js\n ** module id = 0\n ** module chunks = 0\n **/","var STEPS = {\n\tN: [-1, 0],\n\tE: [0, 1],\n\tS: [1, 0],\n\tW: [0, -1]\n};\n\nvar Snake = function (startPos) {\n\tthis.direction = null;\n\t// 0 is the head, last is the tail\n\tthis.segments = [startPos, [startPos[0] - 1, startPos[1]]];\n\tthis.nextDirection = this.direction;\n};\n\nSnake.prototype.move = function () {\n\tthis.direction = this.nextDirection;\n\tif (this.direction === null) return;\n\tvar step = STEPS[this.direction];\n\tvar nextStep = [this.segments[0][0] + step[0], this.segments[0][1] + step[1]];\n\tthis.segments.pop();\n\tthis.segments.unshift(nextStep);\n};\n\nSnake.prototype.grow = function (numSquares) {\n\tfor (var i = 0; i < numSquares; i++) {\n\t\tthis.segments.push(this.segments[this.segments.length - 1]);\n\t}\n};\n\nSnake.prototype.isCollidedSelf = function () {\n  var head = this.segments[0];\n\tfor (var i = 1; i < this.segments.length; i++) {\n\t\tif (head[0] === this.segments[i][0] &&\n\t\t  head[1] === this.segments[i][1]) {\n\t\t\t\treturn true;\n\t\t}\n\t}\n\treturn false;\n};\n\nSnake.prototype.turn = function (direction) {\n\tvar currentStep = STEPS[this.direction] || [-2, -2]; // never happens\n\tvar newStep = STEPS[direction];\n\n\tif (currentStep[0] + newStep[0] === 0 && currentStep[1] + newStep[1] === 0) {\n\t\treturn;\n\t}\n  this.nextDirection = direction;\n};\n\nmodule.exports = Snake;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./js/snake.js\n ** module id = 1\n ** module chunks = 0\n **/","var Snake = require(\"./snake.js\");\n\nvar Board = function () {\n  this.height = 30;\n\tthis.width = 30;\n\tthis.snakeOne = new Snake(this.getRandomPos());\n\tthis.snakeTwo = new Snake(this.getRandomPos());\n\tthis.apple = null;\n\tthis.addApple();\n};\n\nBoard.prototype.getRandomPos = function () {\n\treturn [1 + Math.floor(Math.random() * (this.height - 2)),\n\t\t1 + Math.floor(Math.random() * (this.width - 2))];\n};\n\nBoard.prototype.addApple = function () {\n  var applePos = this.getRandomPos();\n\twhile (this.isOccupied(applePos)) {\n\t\tapplePos = this.getRandomPos();\n\t}\n\tthis.apple = applePos;\n};\n\nBoard.prototype.isOccupied = function (pos) {\n  var occupiedSquares = this.snakeOne.segments.concat(this.snakeTwo.segments);\n\tif (this.apple) occupiedSquares.concat([this.apple]);\n\tfor (var i = 1; i < occupiedSquares.length; i++) {\n\t\tif (pos[0] === occupiedSquares[i][0] &&\n\t\t\tpos[1] === occupiedSquares[i][1]) {\n\t\t\t\treturn true;\n\t\t}\n\t}\n\treturn false;\n};\n\nBoard.prototype.isSnakeHitWall = function (snake) {\n\tvar head = snake.segments[0];\n\tif (head[0] < 0 || head[0] >= this.height ||\n\t\thead[1] < 0 || head[1] >= this.width) {\n\t\t\treturn true;\n\t}\n\treturn false;\n};\n\nBoard.prototype.isSnakeHitOtherSnake = function (deadSnake, liveSnake) {\n\tvar head = deadSnake.segments[0];\n\tfor (var i = 1; i < liveSnake.segments.length; i++) {\n\t\tif (head[0] === liveSnake.segments[i][0] &&\n\t\t  head[1] === liveSnake.segments[i][1]) {\n\t\t\t\treturn true;\n\t\t}\n\t}\n\treturn false;\n};\n\nBoard.prototype.isSnakeEatApple = function (snake) {\n\tvar head = snake.segments[0];\n\tif (head[0] === this.apple[0] &&\n\t\thead[1] === this.apple[1]) {\n\t  return true;\n  }\n\treturn false;\n};\n\nBoard.prototype.isGameOver = function () {\n\treturn this.isSnakeHitWall(this.snakeOne) ||\n\t  this.isSnakeHitWall(this.snakeTwo) ||\n\t\tthis.snakeOne.isCollidedSelf() ||\n\t\tthis.snakeTwo.isCollidedSelf() ||\n\t\tthis.isSnakeHitOtherSnake(this.snakeOne, this.snakeTwo) ||\n\t\tthis.isSnakeHitOtherSnake(this.snakeTwo, this.snakeOne);\n};\n\nBoard.prototype.step = function () {\n\tif (this.isGameOver()) {\n    return;\n\t} else {\n    if (this.isSnakeEatApple(this.snakeOne)) {\n\t\t\tthis.snakeOne.grow(1);\n\t\t\tthis.addApple();\n\t\t}\n\t\tthis.snakeOne.move();\n\n\t\tif (this.isSnakeEatApple(this.snakeTwo)) {\n\t\t\tthis.snakeTwo.grow(1);\n\t\t\tthis.addApple();\n\t\t}\n\t\tthis.snakeTwo.move();\n\t}\n};\n\nmodule.exports = Board;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./js/board.js\n ** module id = 2\n ** module chunks = 0\n **/","// up is 38\n// right is 39\n// left is 37\n// down is 40\n\nvar SNAKE_ONE_CODE = {\n\t38: \"N\",\n\t39: \"E\",\n\t37: \"W\",\n\t40: \"S\"\n};\n\n// W is 87\n// D is 68\n// S is 83\n// A is 65\nvar SNAKE_TWO_CODE = {\n  87: \"N\",\n\t68: \"E\",\n\t65: \"W\",\n\t83: \"S\"\n};\n\nvar SnakeView = function (board, $gameFigure) {\n  this.board = board;\n\tthis.$gameFigure = $gameFigure;\n\tthis.setUpBoard();\n\tthis.render();\n\tthis.bindKeys();\n\n\tthis.intervalHandler = setInterval(this.step.bind(this), 75);\n};\n\nSnakeView.prototype.bindKeys = function () {\n\t$l(\"body\").on('keydown', this.handleKeyEvent.bind(this));\n};\n\nSnakeView.prototype.handleKeyEvent = function (e) {\n  if (SNAKE_ONE_CODE[e.keyCode]) {\n\t\tthis.board.snakeOne.turn(SNAKE_ONE_CODE[e.keyCode]);\n\t}\n\tif (SNAKE_TWO_CODE[e.keyCode]) {\n\t\tthis.board.snakeTwo.turn(SNAKE_TWO_CODE[e.keyCode]);\n\t}\n};\n\nSnakeView.prototype.step = function () {\n\tthis.board.step();\n\tif (this.board.isGameOver()) {\n    alert(\"You died!\");\n\t\twindow.clearInterval(this.intervalHandler);\n\t\treturn;\n\t}\n\tthis.render();\n};\n\nSnakeView.prototype.setUpBoard = function () {\n  var numSquares = this.board.height * this.board.width;\n  this.$gameFigure.append(\"<ul></ul>\");\n\tvar $gameUl = this.$gameFigure.find(\"ul\");\n\t$gameUl.addClass('group');\n\tfor (var i = 0; i < numSquares; i++) {\n\t\t$gameUl.append(\"<li id='id\" + i + \"'></li>\");\n\t}\n};\n\nSnakeView.prototype.render = function () {\n\tthis.$gameFigure.find('li').removeClass();\n\tfor (var i = 0; i < this.board.snakeOne.segments.length; i++) {\n    var snakeOneId = this.posToId(this.board.snakeOne.segments[i]);\n\t\tvar $snakeOneSquare = $l(\"#id\" + snakeOneId);\n\t\t$snakeOneSquare.addClass('snake-one-square');\n\t}\n\n\tfor (i = 0; i < this.board.snakeTwo.segments.length; i++) {\n    var snakeTwoId = this.posToId(this.board.snakeTwo.segments[i]);\n\t\tvar $snakeTwoSquare = $l(\"#id\" + snakeTwoId);\n\t\t$snakeTwoSquare.addClass('snake-two-square');\n\t}\n\n\tvar appleId = this.posToId(this.board.apple);\n\tvar $appleSquare = $l('#id' + appleId);\n\t$appleSquare.addClass('apple-square');\n};\n\nSnakeView.prototype.posToId = function (pos) {\n  return pos[0] * this.board.height + pos[1];\n};\n\nmodule.exports = SnakeView;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./js/snake-view.js\n ** module id = 3\n ** module chunks = 0\n **/"],"sourceRoot":""}